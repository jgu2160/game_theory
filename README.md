Robert Axelrod organized a Prisoner's Dilemma tournament in the 1980s and summarized his findings in the book Evolution of Cooperation (http://en.wikipedia.org/wiki/The_Evolution_of_Cooperation). This code is based upon what I thought the competition code might look like, in Ruby.

There are 3 normal form games built in, and the program can find the Nash Equilibrium for any payoff structure.
